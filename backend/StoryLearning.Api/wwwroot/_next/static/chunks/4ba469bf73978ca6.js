(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41240,e=>{"use strict";let t=(0,e.i(75254).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>t],41240)},96421,e=>{"use strict";let t=(0,e.i(75254).default)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);e.s(["Shuffle",()=>t],96421)},14197,e=>{"use strict";var t=e.i(61664);function r(e){return({Adventure:"ðŸ—ºï¸",Fantasy:"ðŸ§™","Sci-Fi":"ðŸ‘½",Mystery:"ðŸ”",Horror:"ðŸ‘»",Romance:"ðŸ’–",History:"ðŸ“œ",Comedy:"ðŸ˜‚",Drama:"ðŸŽ­",Crime:"ðŸš“",Biography:"ðŸ“–",General:"ðŸ“š"})[e||"General"]||"ðŸ“š"}async function s(e,r){let s=`${t.API_BASE_URL}/api/story`,a=new URLSearchParams;r&&a.append("id",r.toString()),e&&a.append("date",e),a.toString()&&(s+=`?${a.toString()}`),console.log("ðŸš€ Fetching story from API:",s);try{let e=await fetch(s);if(!e.ok)throw console.error("âŒ Failed to fetch story:",e.statusText),Error(`Failed to fetch story: ${e.statusText}`);let t=await e.json();return console.log("âœ… Story data received:",t),t}catch(e){throw console.error("âŒ Error in fetchStory:",e),e}}async function a(){try{let e=await fetch(`${t.API_BASE_URL}/api/stories`);if(!e.ok)throw Error(`Failed to fetch stories: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching stories:",e),[]}}async function n(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/known`);if(!e.ok)throw Error(`Failed to fetch known words: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words:",e),[]}}async function i(e){try{let r=await fetch(`${t.API_BASE_URL}/api/vocabulary/mark`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wordId:e})});if(!r.ok)throw Error(`Failed to mark word as known: ${r.statusText}`)}catch(e){throw console.error("Error marking word as known:",e),e}}async function o(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/my-list-details`);if(!e.ok)throw Error(`Failed to fetch known words details: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words details:",e),[]}}async function l(e,r,s,a,n){let i=await fetch(`${t.API_BASE_URL}/api/story/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e,difficulty:r,vocabCount:s,genre:a,knownWords:n||[]})});if(!i.ok)throw Error("Failed to generate story");return await i.json()}e.s(["fetchKnownWords",()=>n,"fetchKnownWordsDetails",()=>o,"fetchStories",()=>a,"fetchStory",()=>s,"generateStory",()=>l,"getGenreIcon",()=>r,"markWordAsKnown",()=>i])},64030,e=>{"use strict";let t=(0,e.i(75254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>t],64030)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},95468,73884,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],95468);let s=(0,t.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},76698,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(71689),n=e.i(64030),i=e.i(96421),o=e.i(72520),l=e.i(67240),d=e.i(95468),c=e.i(73884),h=e.i(41240),u=e.i(14197);function f(){let[e,f]=(0,r.useState)([]),[x,p]=(0,r.useState)({status:"loading",currentWord:null,originalLetters:[],shuffledLetters:[],slots:[],score:0,streak:0,showHint:!1});(0,r.useEffect)(()=>{(async()=>{try{let e=(await (0,u.fetchKnownWordsDetails)()).filter(e=>e.word.length>=3&&e.word.length<=12);if(e.length<5)return void alert("Not enough words to play! Learn more words first.");f(e),g(e,0,0)}catch(e){console.error(e)}})()},[]);let g=(e,t,r)=>{if(0===e.length)return;let s=e[Math.floor(Math.random()*e.length)],a=s.word.toUpperCase(),n=a.split(""),i=n.map((e,t)=>({id:t,char:e,isUsed:!1})),o=0;do{for(let e=i.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}o++}while(i.map(e=>e.char).join("")===a&&o<10)p({status:"playing",currentWord:s,originalLetters:n,shuffledLetters:i,slots:Array(n.length).fill({id:null,char:null}),score:t,streak:r,showHint:!1})};return(0,t.jsxs)("div",{className:"h-full flex flex-col bg-zinc-50 dark:bg-zinc-900 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)(s.default,{href:"/games",className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-200 transition-colors",children:[(0,t.jsx)(a.ArrowLeft,{size:20}),(0,t.jsx)("span",{className:"font-bold",children:"Exit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-orange-100 dark:bg-orange-900/30 px-3 py-1 rounded-full text-orange-700 dark:text-orange-400 font-bold text-sm",children:[(0,t.jsx)(n.Trophy,{size:16}),"Streak: ",x.streak]}),(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full font-bold text-zinc-600 dark:text-zinc-300",children:["Score: ",x.score]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center max-w-xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-3xl p-8 shadow-sm border-2 border-zinc-100 dark:border-zinc-700 w-full mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-zinc-400 font-bold uppercase tracking-wider text-xs",children:[(0,t.jsx)(i.Shuffle,{size:16}),(0,t.jsx)("span",{children:"Unscramble the Word"})]}),"playing"===x.status&&x.currentWord&&(0,t.jsxs)("button",{onClick:()=>p(e=>({...e,showHint:!e.showHint})),className:`text-xs flex items-center gap-1 px-2 py-1 rounded-full transition-all ${x.showHint?"bg-amber-100 text-amber-600":"text-zinc-400 hover:text-amber-500"}`,children:[(0,t.jsx)(h.Lightbulb,{size:14}),(0,t.jsx)("span",{children:"Hint"})]})]}),x.showHint&&x.currentWord&&"playing"===x.status&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl text-center text-sm animate-in fade-in",children:(0,t.jsx)("span",{className:"font-medium",children:x.currentWord.translation})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 min-h-[80px] bg-zinc-50 dark:bg-zinc-900/50 p-6 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-700 mb-6 items-center justify-center",children:"loading"!==x.status&&x.slots.map((e,r)=>(0,t.jsx)("button",{onClick:()=>(e=>{if("playing"!==x.status)return;let t=x.slots[e];if(null===t.id)return;let r=x.shuffledLetters.map(e=>e.id===t.id?{...e,isUsed:!1}:e),s=[...x.slots];s.splice(e,1),s.push({id:null,char:null}),p(e=>({...e,shuffledLetters:r,slots:s}))})(r),disabled:"playing"!==x.status||null===e.id,className:`
                                    w-12 h-14 rounded-xl font-bold text-2xl transition-all flex items-center justify-center
                                    ${e.char?"bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300 border-2 border-orange-200 dark:border-orange-800 shadow-sm hover:bg-red-50 hover:text-red-500 hover:border-red-200":"bg-zinc-100 dark:bg-zinc-800/50 border-2 border-dashed border-zinc-300 dark:border-zinc-600"}
                                    ${"playing"===x.status?"active:scale-95":""}
                                `,children:e.char},`slot-${r}`))}),"success"===x.status&&x.currentWord&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",children:[(0,t.jsx)(d.CheckCircle2,{size:24,className:"shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Correct! ðŸŽ‰"}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:[x.currentWord.word," - ",x.currentWord.translation]})]})]}),"fail"===x.status&&x.currentWord&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",children:[(0,t.jsx)(c.XCircle,{size:24,className:"shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Not quite right."}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:["Correct: ",(0,t.jsx)("span",{className:"font-bold",children:x.currentWord.word.toUpperCase()})," - ",x.currentWord.translation]})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:"loading"!==x.status&&x.shuffledLetters.map((e,r)=>(0,t.jsx)("button",{onClick:()=>(e=>{if("playing"!==x.status)return;let t=x.shuffledLetters[e];if(t.isUsed)return;let r=x.slots.findIndex(e=>null===e.id);if(-1===r)return;let s=[...x.slots];s[r]={id:t.id,char:t.char};let a=[...x.shuffledLetters];a[e]={...t,isUsed:!0},p(e=>({...e,slots:s,shuffledLetters:a}))})(r),disabled:e.isUsed||"playing"!==x.status,className:`
                                    w-12 h-14 rounded-xl font-bold text-2xl border-b-4 transition-all flex items-center justify-center
                                    ${e.isUsed?"opacity-0 pointer-events-none scale-0":"bg-white dark:bg-zinc-700 text-zinc-700 dark:text-zinc-200 border-zinc-200 dark:border-zinc-900 shadow-md hover:-translate-y-1 active:translate-y-0 active:border-b-0"}
                                `,children:e.char},`pool-${e.id}`))})]}),(0,t.jsx)("div",{className:"w-full max-w-xl flex gap-3",children:"playing"===x.status?(0,t.jsx)("button",{onClick:()=>{if(x.slots.map(e=>e.char).filter(e=>null!==e).join("")===(x.currentWord?.word.toUpperCase()||"")){let e=x.score+15+3*x.streak;p(t=>({...t,status:"success",score:e,streak:t.streak+1}))}else p(e=>({...e,status:"fail",streak:0}))},disabled:x.slots.some(e=>null===e.char),className:"w-full py-4 bg-orange-500 disabled:bg-zinc-300 disabled:cursor-not-allowed hover:bg-orange-600 text-white rounded-2xl font-bold shadow-xl shadow-orange-500/20 transition-all active:scale-95",children:"Check Answer"}):(0,t.jsxs)(t.Fragment,{children:["fail"===x.status&&(0,t.jsxs)("button",{onClick:()=>{let e=x.shuffledLetters.map(e=>({...e,isUsed:!1}));p(t=>({...t,status:"playing",shuffledLetters:e,slots:Array(t.originalLetters.length).fill({id:null,char:null}),showHint:!1}))},className:"flex-1 py-4 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-200 rounded-2xl font-bold transition-all flex items-center justify-center gap-2 active:scale-95",children:[(0,t.jsx)(l.RotateCcw,{size:20}),"Try Again"]}),(0,t.jsxs)("button",{onClick:()=>{g(e,x.score,x.streak)},className:"flex-1 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-2xl font-bold shadow-xl shadow-orange-500/20 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{children:"Next Word"}),(0,t.jsx)(o.ArrowRight,{size:20})]})]})})]})]})}e.s(["default",()=>f])}]);