(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77754,e=>{"use strict";let t=(0,e.i(75254).default)("puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]);e.s(["Puzzle",()=>t],77754)},14197,e=>{"use strict";var t=e.i(61664);function r(e){return({Adventure:"ðŸ—ºï¸",Fantasy:"ðŸ§™","Sci-Fi":"ðŸ‘½",Mystery:"ðŸ”",Horror:"ðŸ‘»",Romance:"ðŸ’–",History:"ðŸ“œ",Comedy:"ðŸ˜‚",Drama:"ðŸŽ­",Crime:"ðŸš“",Biography:"ðŸ“–",General:"ðŸ“š"})[e||"General"]||"ðŸ“š"}async function s(e,r){let s=`${t.API_BASE_URL}/api/story`,a=new URLSearchParams;r&&a.append("id",r.toString()),e&&a.append("date",e),a.toString()&&(s+=`?${a.toString()}`),console.log("ðŸš€ Fetching story from API:",s);try{let e=await fetch(s);if(!e.ok)throw console.error("âŒ Failed to fetch story:",e.statusText),Error(`Failed to fetch story: ${e.statusText}`);let t=await e.json();return console.log("âœ… Story data received:",t),t}catch(e){throw console.error("âŒ Error in fetchStory:",e),e}}async function a(){try{let e=await fetch(`${t.API_BASE_URL}/api/stories`);if(!e.ok)throw Error(`Failed to fetch stories: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching stories:",e),[]}}async function i(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/known`);if(!e.ok)throw Error(`Failed to fetch known words: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words:",e),[]}}async function n(e){try{let r=await fetch(`${t.API_BASE_URL}/api/vocabulary/mark`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wordId:e})});if(!r.ok)throw Error(`Failed to mark word as known: ${r.statusText}`)}catch(e){throw console.error("Error marking word as known:",e),e}}async function l(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/my-list-details`);if(!e.ok)throw Error(`Failed to fetch known words details: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words details:",e),[]}}async function o(e,r,s,a,i){let n=await fetch(`${t.API_BASE_URL}/api/story/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e,difficulty:r,vocabCount:s,genre:a,knownWords:i||[]})});if(!n.ok)throw Error("Failed to generate story");return await n.json()}e.s(["fetchKnownWords",()=>i,"fetchKnownWordsDetails",()=>l,"fetchStories",()=>a,"fetchStory",()=>s,"generateStory",()=>o,"getGenreIcon",()=>r,"markWordAsKnown",()=>n])},64030,e=>{"use strict";let t=(0,e.i(75254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>t],64030)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},95468,73884,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],95468);let s=(0,t.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},48614,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(71689),i=e.i(64030),n=e.i(77754),l=e.i(72520),o=e.i(67240),d=e.i(95468),c=e.i(73884),h=e.i(14197);function f(){let[e,f]=(0,r.useState)([]),[u,x]=(0,r.useState)({status:"loading",targetSentence:"",targetTranslation:"",originalTokens:[],shuffledTokens:[],slots:[],score:0,streak:0});(0,r.useEffect)(()=>{(async()=>{try{let e=(await (0,h.fetchKnownWordsDetails)()).filter(e=>e.example&&e.example.length>10&&e.example.split(" ").length>=3);if(e.length<3)return void alert("Not enough sentences to play! Learn more words first.");f(e),g(e,0,0)}catch(e){console.error(e)}})()},[]);let g=(e,t,r)=>{if(0===e.length)return;let s=e[Math.floor(Math.random()*e.length)],a=s.example.trim(),i=a.split(/\s+/),n=i.map((e,t)=>({id:t,text:e,isUsed:!1}));for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}x({status:"playing",targetSentence:a,targetTranslation:s.exampleTranslation||"No translation available",originalTokens:i,shuffledTokens:n,slots:Array(i.length).fill({id:null,text:null}),score:t,streak:r})};return(0,t.jsxs)("div",{className:"h-full flex flex-col bg-zinc-50 dark:bg-zinc-900 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)(s.default,{href:"/games",className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-200 transition-colors",children:[(0,t.jsx)(a.ArrowLeft,{size:20}),(0,t.jsx)("span",{className:"font-bold",children:"Exit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-indigo-100 dark:bg-indigo-900/30 px-3 py-1 rounded-full text-indigo-700 dark:text-indigo-400 font-bold text-sm",children:[(0,t.jsx)(i.Trophy,{size:16}),"Streak: ",u.streak]}),(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full font-bold text-zinc-600 dark:text-zinc-300",children:["Score: ",u.score]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center max-w-2xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-3xl p-8 shadow-sm border-2 border-zinc-100 dark:border-zinc-700 w-full mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6 text-zinc-400 font-bold uppercase tracking-wider text-xs",children:[(0,t.jsx)(n.Puzzle,{size:16}),(0,t.jsx)("span",{children:"Construct the Sentence"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 min-h-[120px] bg-zinc-50 dark:bg-zinc-900/50 p-6 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-700 mb-6 items-center justify-start content-start",children:"loading"!==u.status&&u.slots.map((e,r)=>(0,t.jsx)("button",{onClick:()=>(e=>{if("playing"!==u.status)return;let t=u.slots[e];if(null===t.id)return;let r=u.shuffledTokens.map(e=>e.id===t.id?{...e,isUsed:!1}:e),s=[...u.slots];s[e]={id:null,text:null},s.splice(e,1),s.push({id:null,text:null}),x(e=>({...e,shuffledTokens:r,slots:s}))})(r),disabled:"playing"!==u.status||null===e.id,className:`
                                    h-10 px-4 rounded-lg font-medium text-lg transition-all
                                    ${e.text?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800 shadow-sm hover:bg-red-50 hover:text-red-500 hover:border-red-200":"bg-zinc-100 dark:bg-zinc-800/50 border border-transparent"}
                                    ${"playing"===u.status?"active:scale-95":""}
                                `,children:e.text},`slot-${r}`))}),"success"===u.status&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",children:[(0,t.jsx)(d.CheckCircle2,{size:24,className:"shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Correct!"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:u.targetTranslation})]})]}),"fail"===u.status&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",children:[(0,t.jsx)(c.XCircle,{size:24,className:"shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Not quite right."}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:["Correct: ",u.targetSentence]})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:"loading"!==u.status&&u.shuffledTokens.map((e,r)=>(0,t.jsx)("button",{onClick:()=>(e=>{if("playing"!==u.status)return;let t=u.shuffledTokens[e];if(t.isUsed)return;let r=u.slots.findIndex(e=>null===e.id);if(-1===r)return;let s=[...u.slots];s[r]={id:t.id,text:t.text};let a=[...u.shuffledTokens];a[e]={...t,isUsed:!0},x(e=>({...e,slots:s,shuffledTokens:a}))})(r),disabled:e.isUsed||"playing"!==u.status,className:`
                                    px-4 py-2 rounded-xl font-bold text-lg border-b-4 transition-all
                                    ${e.isUsed?"opacity-0 pointer-events-none scale-0":"bg-white dark:bg-zinc-700 text-zinc-700 dark:text-zinc-200 border-zinc-200 dark:border-zinc-900 shadow-sm hover:-translate-y-1 active:translate-y-0 active:border-b-0"}
                                `,children:e.text},`pool-${e.id}`))})]}),(0,t.jsx)("div",{className:"w-full max-w-2xl flex gap-3",children:"playing"===u.status?(0,t.jsx)("button",{onClick:()=>{if(u.slots.map(e=>e.text).filter(e=>null!==e).join(" ")===u.targetSentence){let e=u.score+20+5*u.streak;x(t=>({...t,status:"success",score:e,streak:t.streak+1}))}else x(e=>({...e,status:"fail",streak:0}))},disabled:u.slots.some(e=>null===e.text),className:"w-full py-4 bg-indigo-600 disabled:bg-zinc-300 disabled:cursor-not-allowed hover:bg-indigo-700 text-white rounded-2xl font-bold shadow-xl shadow-indigo-500/20 transition-all active:scale-95",children:"Check Answer"}):(0,t.jsxs)(t.Fragment,{children:["fail"===u.status&&(0,t.jsxs)("button",{onClick:()=>{let e=u.shuffledTokens.map(e=>({...e,isUsed:!1}));x(t=>({...t,status:"playing",shuffledTokens:e,slots:Array(t.originalTokens.length).fill({id:null,text:null})}))},className:"flex-1 py-4 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-200 rounded-2xl font-bold transition-all flex items-center justify-center gap-2 active:scale-95",children:[(0,t.jsx)(o.RotateCcw,{size:20}),"Try Again"]}),(0,t.jsxs)("button",{onClick:()=>{g(e,u.score,u.streak)},className:"flex-1 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold shadow-xl shadow-indigo-500/20 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{children:"Next Sentence"}),(0,t.jsx)(l.ArrowRight,{size:20})]})]})})]})]})}e.s(["default",()=>f])}]);