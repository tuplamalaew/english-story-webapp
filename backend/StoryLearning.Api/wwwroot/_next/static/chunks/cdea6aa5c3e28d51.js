(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14197,e=>{"use strict";var t=e.i(61664);function r(e){return({Adventure:"ðŸ—ºï¸",Fantasy:"ðŸ§™","Sci-Fi":"ðŸ‘½",Mystery:"ðŸ”",Horror:"ðŸ‘»",Romance:"ðŸ’–",History:"ðŸ“œ",Comedy:"ðŸ˜‚",Drama:"ðŸŽ­",Crime:"ðŸš“",Biography:"ðŸ“–",General:"ðŸ“š"})[e||"General"]||"ðŸ“š"}async function a(e,r){let a=`${t.API_BASE_URL}/api/story`,n=new URLSearchParams;r&&n.append("id",r.toString()),e&&n.append("date",e),n.toString()&&(a+=`?${n.toString()}`),console.log("ðŸš€ Fetching story from API:",a);try{let e=await fetch(a);if(!e.ok)throw console.error("âŒ Failed to fetch story:",e.statusText),Error(`Failed to fetch story: ${e.statusText}`);let t=await e.json();return console.log("âœ… Story data received:",t),t}catch(e){throw console.error("âŒ Error in fetchStory:",e),e}}async function n(){try{let e=await fetch(`${t.API_BASE_URL}/api/stories`);if(!e.ok)throw Error(`Failed to fetch stories: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching stories:",e),[]}}async function o(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/known`);if(!e.ok)throw Error(`Failed to fetch known words: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words:",e),[]}}async function s(e){try{let r=await fetch(`${t.API_BASE_URL}/api/vocabulary/mark`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wordId:e})});if(!r.ok)throw Error(`Failed to mark word as known: ${r.statusText}`)}catch(e){throw console.error("Error marking word as known:",e),e}}async function i(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/my-list-details`);if(!e.ok)throw Error(`Failed to fetch known words details: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words details:",e),[]}}async function l(e,r,a,n,o){let s=await fetch(`${t.API_BASE_URL}/api/story/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e,difficulty:r,vocabCount:a,genre:n,knownWords:o||[]})});if(!s.ok)throw Error("Failed to generate story");return await s.json()}e.s(["fetchKnownWords",()=>o,"fetchKnownWordsDetails",()=>i,"fetchStories",()=>n,"fetchStory",()=>a,"generateStory",()=>l,"getGenreIcon",()=>r,"markWordAsKnown",()=>s])},64030,e=>{"use strict";let t=(0,e.i(75254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>t],64030)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},41240,e=>{"use strict";let t=(0,e.i(75254).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>t],41240)},91127,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),n=e.i(71689),o=e.i(64030),s=e.i(41240);let i=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var l=e.i(14197);function c(){let[e,c]=(0,r.useState)([]),[d,u]=(0,r.useState)({status:"loading",currentWord:null,maskedWord:[],revealedIndices:new Set,attempts:0,score:0,streak:0}),[h,f]=(0,r.useState)([]),x=(0,r.useRef)([]);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,l.fetchKnownWordsDetails)();if(e.length<5)return void alert("You need at least 5 known words to play!");c(e),g(e,0,0)}catch(e){console.error(e)}})()},[]);let g=(e,t,r)=>{if(0===e.length)return;let a=e[Math.floor(Math.random()*e.length)],n=a.word.split(""),o=new Set,s=Math.max(1,Math.floor(.5*n.length));for(;o.size<s;)o.add(Math.floor(Math.random()*n.length));let i=n.map((e,t)=>o.has(t)?null:e),l=n.map((e,t)=>o.has(t)?"":e);u({status:"playing",currentWord:a,maskedWord:i,revealedIndices:new Set,attempts:0,score:t,streak:r}),f(l),setTimeout(()=>{let e=l.findIndex(e=>""===e);-1!==e&&x.current[e]&&x.current[e]?.focus()},100)},y=e=>{if(d.currentWord)if(e.join("").toLowerCase()===d.currentWord.word.toLowerCase()){let e=d.score+10+2*d.streak;u(t=>({...t,status:"success",score:e,streak:t.streak+1}))}else e.every(e=>e.length>0)};return(0,t.jsxs)("div",{className:"h-full flex flex-col bg-zinc-50 dark:bg-zinc-900 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)(a.default,{href:"/games",className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-200 transition-colors",children:[(0,t.jsx)(n.ArrowLeft,{size:20}),(0,t.jsx)("span",{className:"font-bold",children:"Exit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-100 dark:bg-yellow-900/30 px-3 py-1 rounded-full text-yellow-700 dark:text-yellow-400 font-bold text-sm",children:[(0,t.jsx)(o.Trophy,{size:16}),"Streak: ",d.streak]}),(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full font-bold text-zinc-600 dark:text-zinc-300",children:["Score: ",d.score]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center max-w-2xl mx-auto w-full",children:["loading"===d.status&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"}),d.currentWord&&("playing"===d.status||"success"===d.status)&&(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-8 rounded-3xl shadow-xl border-2 border-zinc-100 dark:border-zinc-700 mb-8 text-center relative overflow-hidden",children:["success"===d.status&&(0,t.jsx)("div",{className:"absolute inset-0 bg-green-500/10 flex items-center justify-center z-10 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-2xl transform animate-bounce",children:[(0,t.jsx)("div",{className:"text-5xl mb-2",children:"ðŸŽ‰"}),(0,t.jsx)("div",{className:"font-black text-2xl text-green-600",children:"Correct!"}),(0,t.jsx)("button",{onClick:()=>{g(e,d.score,d.streak)},className:"mt-4 px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold shadow-lg shadow-green-500/30 transition-all",children:"Next Word"})]})}),(0,t.jsx)("span",{className:"text-sm font-bold text-zinc-400 uppercase tracking-widest mb-2 block",children:"Translate this"}),(0,t.jsx)("h2",{className:"text-4xl font-black text-zinc-800 dark:text-zinc-100 mb-4 font-cute",children:d.currentWord.translation}),(0,t.jsx)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-zinc-100 dark:bg-zinc-700/50 text-zinc-500 dark:text-zinc-400 text-sm",children:(0,t.jsx)("span",{className:"font-bold",children:d.currentWord.category})})]}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:d.currentWord.word.split("").map((e,r)=>{let a=null!==d.maskedWord[r];return(0,t.jsx)("input",{ref:e=>{x.current[r]=e},type:"text",maxLength:1,value:h[r],readOnly:a||"playing"!==d.status,onChange:e=>((e,t)=>{if("playing"!==d.status||!d.currentWord)return;let r=t.slice(-1).toLowerCase(),a=[...h];if(a[e]=r,f(a),r){let t=e+1;for(;t<a.length&&null!==d.maskedWord[t]&&!d.revealedIndices.has(t);)t++;for(;t<a.length&&null!==d.maskedWord[t];)t++;t<a.length&&x.current[t]?x.current[t]?.focus():y(a)}})(r,e.target.value),onKeyDown:e=>((e,t)=>{if("Backspace"!==t.key||h[e])"Enter"===t.key&&y(h);else{let t=e-1;for(;t>=0&&null!==d.maskedWord[t];)t--;t>=0&&x.current[t]&&x.current[t]?.focus()}})(r,e),className:`
                                            w-12 h-16 text-center text-3xl font-black rounded-xl border-b-4 transition-all outline-none
                                            ${a?"bg-zinc-100 dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700 text-zinc-400":"bg-white dark:bg-zinc-900 border-zinc-300 dark:border-zinc-600 text-zinc-800 dark:text-zinc-100 focus:border-yellow-500 focus:-translate-y-1 focus:shadow-lg"}
                                            ${"success"===d.status?"border-green-500 text-green-600 bg-green-50":""}
                                        `},r)})}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsxs)("button",{onClick:()=>{if("playing"!==d.status||!d.currentWord)return;let e=d.currentWord.word.split("").map((e,t)=>t).filter(e=>null===d.maskedWord[e]&&!h[e]);if(0===e.length)return;let t=e[Math.floor(Math.random()*e.length)],r=d.currentWord.word[t],a=[...d.maskedWord];a[t]=r;let n=[...h];n[t]=r,u(e=>({...e,maskedWord:a,score:Math.max(0,e.score-2)})),f(n)},disabled:"playing"!==d.status,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition-colors disabled:opacity-50",children:[(0,t.jsx)(i,{size:20}),"Reveal Letter (-2 pts)"]}),(0,t.jsxs)("button",{onClick:()=>alert(`Definition: ${d.currentWord?.definition||"No definition available"}`),disabled:"playing"!==d.status,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 font-bold hover:bg-orange-100 dark:hover:bg-orange-900/40 transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.Lightbulb,{size:20}),"Hint (Example)"]})]})]})]})]})}e.s(["default",()=>c],91127)}]);