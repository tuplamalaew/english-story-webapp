(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14197,e=>{"use strict";var t=e.i(61664);function r(e){return({Adventure:"ðŸ—ºï¸",Fantasy:"ðŸ§™","Sci-Fi":"ðŸ‘½",Mystery:"ðŸ”",Horror:"ðŸ‘»",Romance:"ðŸ’–",History:"ðŸ“œ",Comedy:"ðŸ˜‚",Drama:"ðŸŽ­",Crime:"ðŸš“",Biography:"ðŸ“–",General:"ðŸ“š"})[e||"General"]||"ðŸ“š"}async function s(e,r){let s=`${t.API_BASE_URL}/api/story`,a=new URLSearchParams;r&&a.append("id",r.toString()),e&&a.append("date",e),a.toString()&&(s+=`?${a.toString()}`),console.log("ðŸš€ Fetching story from API:",s);try{let e=await fetch(s);if(!e.ok)throw console.error("âŒ Failed to fetch story:",e.statusText),Error(`Failed to fetch story: ${e.statusText}`);let t=await e.json();return console.log("âœ… Story data received:",t),t}catch(e){throw console.error("âŒ Error in fetchStory:",e),e}}async function a(){try{let e=await fetch(`${t.API_BASE_URL}/api/stories`);if(!e.ok)throw Error(`Failed to fetch stories: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching stories:",e),[]}}async function n(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/known`);if(!e.ok)throw Error(`Failed to fetch known words: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words:",e),[]}}async function o(e){try{let r=await fetch(`${t.API_BASE_URL}/api/vocabulary/mark`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wordId:e})});if(!r.ok)throw Error(`Failed to mark word as known: ${r.statusText}`)}catch(e){throw console.error("Error marking word as known:",e),e}}async function i(){try{let e=await fetch(`${t.API_BASE_URL}/api/vocabulary/my-list-details`);if(!e.ok)throw Error(`Failed to fetch known words details: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching known words details:",e),[]}}async function c(e,r,s,a,n){let o=await fetch(`${t.API_BASE_URL}/api/story/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e,difficulty:r,vocabCount:s,genre:a,knownWords:n||[]})});if(!o.ok)throw Error("Failed to generate story");return await o.json()}e.s(["fetchKnownWords",()=>n,"fetchKnownWordsDetails",()=>i,"fetchStories",()=>a,"fetchStory",()=>s,"generateStory",()=>c,"getGenreIcon",()=>r,"markWordAsKnown",()=>o])},64030,e=>{"use strict";let t=(0,e.i(75254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>t],64030)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},81744,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(71689),n=e.i(64030);let o=(0,e.i(75254).default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var i=e.i(72520),c=e.i(67240),l=e.i(14197);function d(){let[e,d]=(0,r.useState)([]),[h,u]=(0,r.useState)({status:"loading",currentWord:null,attempts:0,score:0,streak:0,showHint:!1}),[x,f]=(0,r.useState)(""),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,l.fetchKnownWordsDetails)();if(e.length<5)return void alert("You need at least 5 known words to play!");d(e),g(e,0,0)}catch(e){console.error(e)}})()},[]);let g=(e,t,r)=>{if(0===e.length)return;let s=e[Math.floor(Math.random()*e.length)];u({status:"playing",currentWord:s,attempts:0,score:t,streak:r,showHint:!1}),f(""),setTimeout(()=>p(s.word),500),setTimeout(()=>m.current?.focus(),100)},p=e=>{window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e);t.lang="en-US",window.speechSynthesis.speak(t)},w=()=>{if(h.currentWord&&"playing"===h.status)if(x.trim().toLowerCase()===h.currentWord.word.toLowerCase()){let e=h.score+10+2*h.streak;u(t=>({...t,status:"success",score:e,streak:t.streak+1}))}else u(e=>({...e,status:"fail",streak:0}))};return(0,t.jsxs)("div",{className:"h-full flex flex-col bg-zinc-50 dark:bg-zinc-900 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)(s.default,{href:"/games",className:"flex items-center gap-2 text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-200 transition-colors",children:[(0,t.jsx)(a.ArrowLeft,{size:20}),(0,t.jsx)("span",{className:"font-bold",children:"Exit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-indigo-100 dark:bg-indigo-900/30 px-3 py-1 rounded-full text-indigo-700 dark:text-indigo-400 font-bold text-sm",children:[(0,t.jsx)(n.Trophy,{size:16}),"Streak: ",h.streak]}),(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full font-bold text-zinc-600 dark:text-zinc-300",children:["Score: ",h.score]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center max-w-lg mx-auto w-full",children:["loading"===h.status&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"}),h.currentWord&&"loading"!==h.status&&(0,t.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,t.jsx)("button",{onClick:()=>h.currentWord&&p(h.currentWord.word),className:"mb-8 w-32 h-32 rounded-full bg-indigo-500 hover:bg-indigo-600 shadow-xl shadow-indigo-500/30 flex items-center justify-center text-white transition-transform active:scale-95 group",children:(0,t.jsx)(o,{size:48,className:"group-hover:animate-pulse"})}),(0,t.jsx)("p",{className:"text-zinc-400 font-medium mb-6 animate-pulse",children:"Click to listen again"}),(0,t.jsxs)("div",{className:"relative w-full mb-4",children:[(0,t.jsx)("input",{ref:m,type:"text",value:x,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w()},disabled:"success"===h.status||"fail"===h.status,placeholder:"Type what you hear...",className:`
                                    w-full px-6 py-4 rounded-2xl text-center text-2xl font-bold outline-none border-2 transition-all
                                    ${"success"===h.status?"bg-green-50 border-green-500 text-green-700":"fail"===h.status?"bg-red-50 border-red-500 text-red-700":"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20"}
                                `}),"success"===h.status&&(0,t.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-green-500 animate-bounce",children:(0,t.jsx)(n.Trophy,{size:28})})]}),(0,t.jsx)("div",{className:"h-8 text-center mb-4",children:"success"!==h.status&&"fail"!==h.status&&(0,t.jsx)(t.Fragment,{children:h.showHint?(0,t.jsxs)("span",{className:"text-zinc-400 dark:text-zinc-500 text-sm font-medium animate-in fade-in",children:["Hint: It means ",(0,t.jsxs)("span",{className:"text-indigo-500 dark:text-indigo-400",children:['"',h.currentWord.translation,'"']})]}):(0,t.jsx)("button",{onClick:()=>u(e=>({...e,showHint:!0})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-600 underline decoration-dashed underline-offset-4",children:"Need a hint?"})})}),"success"===h.status&&(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-4 mb-6 text-center",children:[(0,t.jsx)("p",{className:"text-green-500 font-bold mb-1 text-xl",children:"Correct!"}),(0,t.jsxs)("p",{className:"text-zinc-500",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 dark:text-zinc-200",children:h.currentWord.word}),(0,t.jsx)("span",{className:"mx-2",children:"-"}),(0,t.jsx)("span",{className:"italic",children:h.currentWord.translation})]})]}),"fail"===h.status&&(0,t.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-4 mb-6 text-center",children:[(0,t.jsx)("p",{className:"text-red-500 font-bold mb-1",children:"Incorrect!"}),(0,t.jsxs)("p",{className:"text-zinc-500",children:["Correct: ",(0,t.jsx)("span",{className:"font-bold text-zinc-800 dark:text-zinc-200",children:h.currentWord.word}),(0,t.jsx)("span",{className:"mx-2",children:"-"}),(0,t.jsx)("span",{className:"italic",children:h.currentWord.translation})]})]}),(0,t.jsx)("div",{className:"flex gap-3 mt-6 w-full",children:"playing"===h.status?(0,t.jsx)("button",{onClick:w,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95",children:"Check Answer"}):(0,t.jsxs)(t.Fragment,{children:["fail"===h.status&&(0,t.jsxs)("button",{onClick:()=>{u(e=>({...e,status:"playing",showHint:!1})),f(""),setTimeout(()=>m.current?.focus(),100),h.currentWord&&p(h.currentWord.word)},className:"flex-1 py-3 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-200 rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)(c.RotateCcw,{size:18}),"Try Again"]}),(0,t.jsxs)("button",{onClick:()=>{g(e,h.score,h.streak)},className:"flex-1 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{children:"Next Word"}),(0,t.jsx)(i.ArrowRight,{size:18})]})]})})]})]})]})}e.s(["default",()=>d],81744)}]);