(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,r)=>{},98547,(e,t,r)=>{var n=e.i(47167);e.r(16015);var i=e.r(71645),s=i&&"object"==typeof i&&"default"in i?i:{default:i},a=void 0!==n.default&&n.default.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,s=void 0===i?a:i;c(o(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(o(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var r="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];c(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},r.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(o(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(n,r):i.appendChild(n),n},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},h={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return h[n]||(h[n]="jsx-"+d(e+"-"+r)),h[n]}function x(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return h[r]||(h[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),h[r]}var m=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,i=t.optimizeForSpeed,s=void 0!==i&&i;this._sheet=n||new l({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),n&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,i=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var s=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=s,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],n=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var i=u(n,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return x(i,e)}):[x(i,t)]}}return{styleId:u(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=i.createContext(null);function g(){return new m}function p(){return i.useContext(f)}f.displayName="StyleSheetContext";var b=s.default.useInsertionEffect||s.default.useLayoutEffect,w="u">typeof window?g():void 0;function v(e){var t=w||p();return t&&("u"<typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,n=i.useContext(f),a=i.useState(function(){return n||t||g()})[0];return s.default.createElement(f.Provider,{value:a},r)},r.createStyleRegistry=g,r.style=v,r.useStyleRegistry=p},37902,(e,t,r)=>{t.exports=e.r(98547).style},92097,e=>{"use strict";var t=e.i(43476),r=e.i(37902),n=e.i(71645),i=e.i(22016),s=e.i(18566),a=e.i(14197),o=e.i(61664);function l({word:e,definition:r,isKnown:i,onClick:s}){let[a,o]=n.default.useState(!1),l=n.default.useRef(i);if(n.default.useEffect(()=>{if(i&&!l.current){o(!0);let e=setTimeout(()=>o(!1),400);return()=>clearTimeout(e)}l.current=i},[i]),!r)return(0,t.jsx)("span",{className:"mr-1",children:e});let c=i?"bg-green-100 hover:bg-green-200 text-green-900 dark:bg-green-900/30 dark:text-green-200 dark:hover:bg-green-900/50 border-b border-green-400 dark:border-green-700":"bg-yellow-200 hover:bg-yellow-300 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-200 dark:hover:bg-yellow-900/50 border-b border-yellow-400 dark:border-yellow-700";return(0,t.jsx)("span",{className:`mr-1 cursor-pointer transition-all duration-200 rounded px-0.5 -mx-0.5 inline-block hover:scale-110 active:scale-90 ${c} ${a?"animate-pop":""}`,onClick:e=>s(r,e),children:e})}function c({word:e,onClose:r,onMarkKnown:n,position:i}){return(0,t.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-zinc-800 rounded-lg shadow-xl border border-zinc-200 dark:border-zinc-700 p-4 w-64 animate-in fade-in zoom-in-95 duration-200",style:{top:Math.min(i.y+10,window.innerHeight-200),left:Math.min(i.x-100,window.innerWidth-270)},children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 capitalize",children:e.word}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 italic font-serif",children:["(",e.partOfSpeech,")"]}),(0,t.jsx)("button",{onClick:()=>{let t=new SpeechSynthesisUtterance(e.word);t.lang="en-US",window.speechSynthesis.speak(t)},className:"text-zinc-500 hover:text-blue-600 dark:text-zinc-400 dark:hover:text-blue-400 transition-colors",title:"Listen",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),(0,t.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]})})]}),(0,t.jsx)("button",{onClick:r,className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-zinc-600 dark:text-zinc-300 text-sm mb-1",children:"Meaning:"}),(0,t.jsx)("p",{className:"text-zinc-900 dark:text-zinc-100 font-medium text-lg",children:e.translation})]}),(0,t.jsx)("button",{onClick:()=>{n(e.word),r()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded transition-colors text-sm",children:"Mark as Known"})]})}function d({total:e,known:r}){let n=Math.round(r/e*100);return(0,t.jsx)("div",{className:"fixed bottom-0 left-0 w-full bg-white dark:bg-zinc-900 border-t border-zinc-200 dark:border-zinc-800 p-4 shadow-lg z-40",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto flex items-center gap-4",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:"Progress"}),(0,t.jsxs)("span",{className:"text-zinc-500 dark:text-zinc-400",children:[r," / ",e," words known (",n,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-zinc-200 dark:bg-zinc-800 rounded-full h-2.5 overflow-hidden",children:(0,t.jsx)("div",{className:`h-2.5 rounded-full transition-all duration-500 ease-out ${100===n?"bg-green-500":"bg-blue-600"}`,style:{width:`${n}%`}})})]})})})}var h=e.i(62474);function u({isOpen:e,onClose:r,chunks:i,knownWords:s}){return(0,n.useEffect)(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[e]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:r}),(0,t.jsx)("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[500px] bg-white dark:bg-zinc-900 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out border-l border-zinc-200 dark:border-zinc-800 ${e?"translate-x-0":"translate-x-full"}`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 font-cute",children:"à¸„à¸³à¹à¸›à¸¥à¸ à¸²à¸©à¸²à¹„à¸—à¸¢"}),(0,t.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 transition-colors",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M18 6 6 18"}),(0,t.jsx)("path",{d:"m6 6 12 12"})]})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsx)("p",{className:"whitespace-pre-wrap text-lg leading-loose text-zinc-700 dark:text-zinc-300 font-cute",children:i.map(e=>{if(e.definition){let r=s.has(e.definition.id);return(0,t.jsx)("span",{className:`${r?"bg-green-100 text-green-900 dark:bg-green-900/30 dark:text-green-200":"bg-yellow-200 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-200"} rounded px-0.5 mx-0.5 transition-colors duration-200`,children:e.text},e.id)}return(0,t.jsx)("span",{children:e.text},e.id)})})})]})})]})}function x({isOpen:e,onClose:r,vocabulary:i,knownWords:s,newWords:a,title:o="My Vocabulary"}){let[l,c]=(0,n.useState)("All");(0,n.useEffect)(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[e]);let d=(0,n.useMemo)(()=>i.filter(e=>s.has(e.word)),[i,s]),{categories:h,newCategories:u}=(0,n.useMemo)(()=>{let e=new Set(d.map(e=>e.category.split("|")[0])),t=new Set;return a.size>0&&t.add("All"),d.forEach(e=>{let r=e.category.split("|")[0];a.has(e.word)&&t.add(r)}),{categories:["All",...Array.from(e)],newCategories:t}},[d,a]),x=(0,n.useMemo)(()=>[..."All"===l?d:d.filter(e=>e.category.split("|")[0]===l)].sort((e,t)=>{let r=a.has(e.word),n=a.has(t.word);return r&&!n?-1:!r&&n?1:e.word.localeCompare(t.word)}),[l,d,a]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:r}),(0,t.jsx)("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[500px] bg-white dark:bg-zinc-900 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out border-l border-zinc-200 dark:border-zinc-800 ${e?"translate-x-0":"translate-x-full"}`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 font-cute",children:o}),(0,t.jsx)("span",{className:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300 text-sm font-bold px-2 py-0.5 rounded-full font-sans",children:d.length})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 transition-colors",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M18 6 6 18"}),(0,t.jsx)("path",{d:"m6 6 12 12"})]})})]}),d.length>0&&(0,t.jsx)("div",{className:"flex gap-2 p-4 overflow-x-auto border-b border-zinc-100 dark:border-zinc-800",children:h.map(e=>(0,t.jsxs)("button",{onClick:()=>c(e),className:`relative px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${l===e?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,children:[e,u.has(e)&&(0,t.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]},e))}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===d.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-zinc-500 space-y-4",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-300 dark:text-zinc-700",children:(0,t.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),(0,t.jsx)("p",{className:"font-cute text-lg",children:"No words collected yet."}),(0,t.jsx)("p",{className:"text-sm",children:'Read the story and mark words as "Known" to see them here!'})]}):(0,t.jsx)("div",{className:"space-y-4",children:x.map(e=>{let r=a.has(e.word);return(0,t.jsxs)("div",{className:`rounded-xl p-4 border transition-all duration-500 ${r?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-600 shadow-md ring-1 ring-yellow-200 dark:ring-yellow-700":"bg-zinc-50 dark:bg-zinc-800/50 border-zinc-100 dark:border-zinc-800 hover:border-blue-200 dark:hover:border-blue-800"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 font-cute",children:e.word}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 italic font-serif",children:["(",e.partOfSpeech,")"]}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wider bg-zinc-200 dark:bg-zinc-700 px-1.5 py-0.5 rounded ml-2",children:e.category.split("|")[0]}),e.category.includes("|")&&(0,t.jsx)("span",{className:"text-xs text-indigo-600 bg-indigo-100 dark:bg-indigo-900/40 dark:text-indigo-300 font-bold px-1.5 py-0.5 rounded",children:e.category.split("|")[1]}),r&&(0,t.jsx)("span",{className:"text-[10px] font-bold text-white bg-red-500 px-2 py-0.5 rounded-full animate-pulse ml-2",children:"NEW"})]}),(0,t.jsx)("p",{className:"text-blue-600 dark:text-blue-400 font-medium font-cute",children:e.translation})]}),(0,t.jsx)("button",{onClick:()=>{let t;(t=new SpeechSynthesisUtterance(e.word)).lang="en-US",window.speechSynthesis.speak(t)},className:"p-2 bg-white dark:bg-zinc-700 rounded-full shadow-sm text-zinc-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Listen",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),(0,t.jsx)("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),(0,t.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})})]}),(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-zinc-200 dark:border-zinc-700/50",children:[(0,t.jsxs)("p",{className:"text-zinc-600 dark:text-zinc-300 italic mb-1 font-serif",children:['"',e.example,'"']}),(0,t.jsx)("p",{className:"text-zinc-500 dark:text-zinc-500 text-sm font-cute",children:e.exampleTranslation})]})]},e.id)})})})]})})]})}var m={};!function e(t,r,n,i){var s,a,o,l,c,d,h,u,x,m,f,g=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),p="function"==typeof Path2D&&"function"==typeof DOMMatrix;function b(){}function w(e){var n=r.exports.Promise,i=void 0!==n?n:t.Promise;return"function"==typeof i?new i(e):(e(b,b),null)}var v=(s=function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var n=e.transferToImageBitmap();r.createPattern(n,"no-repeat")}catch(e){return!1}return!0}(),a=new Map,{transform:function(e){if(s)return e;if(a.has(e))return a.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),a.set(e,t),t},clear:function(){a.clear()}}),y=(c=Math.floor(1e3/60),d={},h=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(o=function(e){var t=Math.random();return d[t]=requestAnimationFrame(function r(n){h===n||h+c-1<n?(h=n,delete d[t],e()):d[t]=requestAnimationFrame(r)}),t},l=function(e){d[e]&&cancelAnimationFrame(d[e])}):(o=function(e){return setTimeout(e,c)},l=function(e){return clearTimeout(e)}),{frame:o,cancel:l}),k=(m={},function(){if(u)return u;if(!n&&g){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{u=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"u">typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",e),null}var r=u;function i(e,t){r.postMessage({options:e||{},callback:t})}r.init=function(e){var t=e.transferControlToOffscreen();r.postMessage({canvas:t},[t])},r.fire=function(e,t,n){if(x)return i(e,null),x;var s=Math.random().toString(36).slice(2);return x=w(function(t){function a(e){e.data.callback===s&&(delete m[s],r.removeEventListener("message",a),x=null,v.clear(),n(),t())}r.addEventListener("message",a),i(e,s),m[s]=a.bind(null,{data:{callback:s}})})},r.reset=function(){for(var e in r.postMessage({reset:!0}),m)m[e](),delete m[e]}}return u}),j={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function z(e,t,r){var n;return n=e&&null!=e[t]?e[t]:j[t],r?r(n):n}function S(e){return e<0?0:Math.floor(e)}function N(e){return parseInt(e,16)}function C(e){return e.map(M)}function M(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:N(t.substring(0,2)),g:N(t.substring(2,4)),b:N(t.substring(4,6))}}function _(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function A(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function L(e,r){var s,a=!e,o=!!z(r||{},"resize"),l=!1,c=z(r,"disableForReducedMotion",Boolean),d=g&&z(r||{},"useWorker")?k():null,h=a?_:A,u=!!e&&!!d&&!!e.__confetti_initialized,x="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function m(r){var m,f=c||z(r,"disableForReducedMotion",Boolean),g=z(r,"zIndex",Number);if(f&&x)return w(function(e){e()});a&&s?e=s.canvas:a&&!e&&((m=document.createElement("canvas")).style.position="fixed",m.style.top="0px",m.style.left="0px",m.style.pointerEvents="none",m.style.zIndex=g,e=m,document.body.appendChild(e)),o&&!u&&h(e);var b={width:e.width,height:e.height};function k(){if(d){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};h(t),d.postMessage({resize:{width:t.width,height:t.height}});return}b.width=b.height=null}function j(){s=null,o&&(l=!1,t.removeEventListener("resize",k)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,u=!1)}return(d&&!u&&d.init(e),u=!0,d&&(e.__confetti_initialized=!0),o&&!l&&(l=!0,t.addEventListener("resize",k,!1)),d)?d.fire(r,b,j):function(t,r,a){for(var o,l,c,d,u,x,m,f=z(t,"particleCount",S),g=z(t,"angle",Number),b=z(t,"spread",Number),k=z(t,"startVelocity",Number),j=z(t,"decay",Number),N=z(t,"gravity",Number),M=z(t,"drift",Number),_=z(t,"colors",C),A=z(t,"ticks",Number),L=z(t,"shapes"),F=z(t,"scalar"),R=!!z(t,"flat"),E=((o=z(t,"origin",Object)).x=z(o,"x",Number),o.y=z(o,"y",Number),o),T=f,B=[],I=e.width*E.x,O=e.height*E.y;T--;)B.push(function(e){var t=e.angle*(Math.PI/180),r=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*r-Math.random()*r),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}({x:I,y:O,angle:g,spread:b,startVelocity:k,color:_[T%_.length],shape:L[Math.floor(Math.random()*(L.length-0))+0],ticks:A,decay:j,gravity:N,drift:M,scalar:F,flat:R}));return s?s.addFettis(B):(l=e,u=B.slice(),x=l.getContext("2d"),m=w(function(e){function t(){c=d=null,x.clearRect(0,0,r.width,r.height),v.clear(),a(),e()}c=y.frame(function e(){n&&(r.width!==i.width||r.height!==i.height)&&(r.width=l.width=i.width,r.height=l.height=i.height),r.width||r.height||(h(l),r.width=l.width,r.height=l.height),x.clearRect(0,0,r.width,r.height),(u=u.filter(function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r,n,i,s,a,o,l,c,d,h,u,x,m,f,g,b,w=t.tick++/t.totalTicks,y=t.x+t.random*t.tiltCos,k=t.y+t.random*t.tiltSin,j=t.wobbleX+t.random*t.tiltCos,z=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-w)+")",e.beginPath(),p&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix)){e.fill((r=t.shape.path,n=t.shape.matrix,i=t.x,s=t.y,a=.1*Math.abs(j-y),o=.1*Math.abs(z-k),l=Math.PI/10*t.wobble,c=new Path2D(r),(d=new Path2D).addPath(c,new DOMMatrix(n)),(h=new Path2D).addPath(d,new DOMMatrix([Math.cos(l)*a,Math.sin(l)*a,-Math.sin(l)*o,Math.cos(l)*o,i,s])),h))}else if("bitmap"===t.shape.type){var S=Math.PI/10*t.wobble,N=.1*Math.abs(j-y),C=.1*Math.abs(z-k),M=t.shape.bitmap.width*t.scalar,_=t.shape.bitmap.height*t.scalar,A=new DOMMatrix([Math.cos(S)*N,Math.sin(S)*N,-Math.sin(S)*C,Math.cos(S)*C,t.x,t.y]);A.multiplySelf(new DOMMatrix(t.shape.matrix));var L=e.createPattern(v.transform(t.shape.bitmap),"no-repeat");L.setTransform(A),e.globalAlpha=1-w,e.fillStyle=L,e.fillRect(t.x-M/2,t.y-_/2,M,_),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(j-y)*t.ovalScalar,Math.abs(z-k)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(u=t.x,x=t.y,m=Math.abs(j-y)*t.ovalScalar,f=Math.abs(z-k)*t.ovalScalar,g=Math.PI/10*t.wobble,b=2*Math.PI,e.save(),e.translate(u,x),e.rotate(g),e.scale(m,f),e.arc(0,0,1,0,b,void 0),e.restore());else if("star"===t.shape)for(var F=Math.PI/2*3,R=4*t.scalar,E=8*t.scalar,T=t.x,B=t.y,I=5,O=Math.PI/5;I--;)T=t.x+Math.cos(F)*E,B=t.y+Math.sin(F)*E,e.lineTo(T,B),F+=O,T=t.x+Math.cos(F)*R,B=t.y+Math.sin(F)*R,e.lineTo(T,B),F+=O;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(k)),e.lineTo(Math.floor(j),Math.floor(z)),e.lineTo(Math.floor(y),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(x,e)})).length?c=y.frame(e):t()}),d=t}),(s={addFettis:function(e){return u=u.concat(e),m},canvas:l,promise:m,reset:function(){c&&y.cancel(c),d&&d()}}).promise)}(r,b,j)}return m.reset=function(){d&&d.reset(),s&&s.reset()},m}function F(){return f||(f=L(null,{useWorker:!0,resize:!0})),f}r.exports=function(){return F().apply(this,arguments)},r.exports.reset=function(){F().reset()},r.exports.create=L,r.exports.shapeFromPath=function(e){if(!p)throw Error("path confetti are not supported in this browser");"string"==typeof e?n=e:(n=e.path,i=e.matrix);var t=new Path2D(n),r=document.createElement("canvas").getContext("2d");if(!i){for(var n,i,s,a,o=1e3,l=1e3,c=0,d=0,h=0;h<1e3;h+=2)for(var u=0;u<1e3;u+=2)r.isPointInPath(t,h,u,"nonzero")&&(o=Math.min(o,h),l=Math.min(l,u),c=Math.max(c,h),d=Math.max(d,u));s=c-o;var x=Math.min(10/s,10/(a=d-l));i=[x,0,0,x,-Math.round(s/2+o)*x,-Math.round(a/2+l)*x]}return{type:"path",path:n,matrix:i}},r.exports.shapeFromText=function(e){var t,r=1,n="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,i="fontFamily"in e?e.fontFamily:i,n="color"in e?e.color:n);var s=10*r,a=""+s+"px "+i,o=new OffscreenCanvas(s,s),l=o.getContext("2d");l.font=a;var c=l.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),h=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),u=c.actualBoundingBoxLeft+2,x=c.actualBoundingBoxAscent+2;d+=4,h+=4,(l=(o=new OffscreenCanvas(d,h)).getContext("2d")).font=a,l.fillStyle=n,l.fillText(t,u,x);var m=1/r;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[m,0,0,m,-d*m/2,-h*m/2]}}}(function(){return"u">typeof window?window:"u">typeof self?self:this||{}}(),m,!1);let f=m.exports;function g({show:e,onComplete:r}){let[i,s]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(e){s(!0),f({particleCount:150,spread:70,origin:{y:.6},zIndex:100});let e=setTimeout(()=>{s(!1),r()},4e3);return()=>clearTimeout(e)}},[e,r]),i)?(0,t.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-[60] flex flex-col items-center justify-center overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] animate-in fade-in duration-500"}),(0,t.jsx)("div",{className:"relative animate-pop-in z-10",children:(0,t.jsx)("div",{className:"text-4xl sm:text-6xl font-black text-center text-zinc-800 dark:text-zinc-100 bg-white/95 dark:bg-zinc-900/95 px-10 py-6 rounded-[2rem] shadow-[0_20px_50px_rgba(0,0,0,0.3)] border-4 border-yellow-400",children:(0,t.jsx)("span",{className:"block animate-bounce",children:"ðŸŽ‰ COMPLETE! ðŸŽ‰"})})}),(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(6)].map((e,r)=>(0,t.jsx)("div",{className:"absolute bottom-0 text-6xl animate-shoot-up",style:{left:`${15+15*r}%`,animationDelay:`${.2*r}s`,opacity:0},children:["ðŸŽ‰","âœ¨","ðŸŽŠ","â­ï¸","ðŸ”¥","ðŸ’Ž"][r]},r))})]}):null}function p(){let[e,r]=(0,n.useState)([]),[m,f]=(0,n.useState)(null),[p,b]=(0,n.useState)(!0),[w,v]=(0,n.useState)(!1),[y,k]=(0,n.useState)(null),[j,z]=(0,n.useState)(null),[S,N]=(0,n.useState)(""),[C,M]=(0,n.useState)(!1),[_,A]=(0,n.useState)(!1),[L,F]=(0,n.useState)("list"),[R,E]=(0,n.useState)(""),[T,B]=(0,n.useState)("Random"),[I,O]=(0,n.useState)("B1"),[P,W]=(0,n.useState)(10),[$,D]=(0,n.useState)(!1),[U,G]=(0,n.useState)("All"),[H,V]=(0,n.useState)("All"),[Z,K]=(0,n.useState)(!1),[q,X]=(0,n.useState)(!1),[Y,J]=(0,n.useState)(new Set),[Q,ee]=(0,n.useState)(new Set),[et,er]=(0,n.useState)(!1),[en,ei]=(0,n.useState)(!1),[es,ea]=(0,n.useState)([]);(0,n.useEffect)(()=>{en&&(0,a.fetchKnownWordsDetails)().then(ea)},[en,Y]);let[eo,el]=(0,n.useState)(!1),ec=(0,s.useSearchParams)(),ed=ec.get("date"),eh=ec.get("id"),eu=(0,n.useMemo)(()=>{let t=e;return S&&(t=t.filter(e=>e.createdDate.startsWith(S))),C&&(t=t.filter(e=>e.liked)),"All"!==U&&(t=t.filter(e=>e.difficultyLevel===U)),"All"!==H&&(t=t.filter(e=>(e.genre||"General").split(",").map(e=>e.trim()).includes(H))),q&&(t=t.filter(e=>e.id>10)),t},[S,C,e,U,H,q]);(0,n.useEffect)(()=>{(async()=>{b(!0);try{let[e,t]=await Promise.all([(0,a.fetchStories)(),(0,a.fetchKnownWords)()]),n=e.map(e=>({...e,active:!1,liked:!1}));if(r(n),J(new Set(t)),n.length>0){let e;eh?e=n.find(e=>e.id===parseInt(eh)):ed&&(e=n.find(e=>e.createdDate.startsWith(ed))),e||(e=n[0]),e&&z(e.id)}}catch(e){k(e.message)}finally{b(!1)}})()},[ed]),(0,n.useEffect)(()=>{j&&(async()=>{v(!0);try{let e=await (0,a.fetchStory)(void 0,j);f(e)}catch(e){console.error("Failed to load story details",e)}finally{v(!1)}})()},[j]),(0,n.useEffect)(()=>{let e=localStorage.getItem("newWords");if(e)try{ee(new Set(JSON.parse(e)))}catch(e){console.error("Failed to parse newWords",e)}el(!0)},[]),(0,n.useEffect)(()=>{eo&&localStorage.setItem("newWords",JSON.stringify(Array.from(Q)))},[Q,eo]);let[ex,em]=(0,n.useState)(null),[ef,eg]=(0,n.useState)(!1),[ep,eb]=(0,n.useState)(!1),ew=(0,n.useMemo)(()=>{if(!m)return[];let e=new Map;return m.vocabulary.forEach(t=>{e.set(t.original.toLowerCase(),t)}),m.storyText.split(/([.,\"!?;:()]|\s+)/).map((t,r)=>{let n=t.toLowerCase().trim();return{id:r,text:t,definition:e.get(n)}})},[m]),ev=(0,n.useMemo)(()=>{if(!m)return[];let e=[...m.vocabulary].sort((e,t)=>t.translation.length-e.translation.length),t=RegExp(`(${e.map(e=>e.translation.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")})`,"g");return m.storyTranslation.split(t).map((t,r)=>{let n=e.find(e=>e.translation===t);return{text:t,definition:n,id:`thai-${r}`}})},[m]),ey=(0,n.useMemo)(()=>m?m.vocabulary.filter(e=>Y.has(e.word)).length:0,[m,Y]);(0,n.useEffect)(()=>{if(m&&ey===m.vocabulary.length&&m.vocabulary.length>0){let e=JSON.parse(localStorage.getItem("completedStories")||"[]");e.includes(m.id)||(er(!0),localStorage.setItem("completedStories",JSON.stringify([...e,m.id])))}},[ey,m]);let ek=async e=>{J(t=>{let r=new Set(t);return r.add(e),r}),ee(t=>{let r=new Set(t);return r.add(e),r}),em(null);try{await (0,a.markWordAsKnown)(e)}catch(e){console.error("Failed to save known word",e)}};(0,n.useEffect)(()=>{let e=e=>{ex&&e.target.closest(".popup-container")};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[ex]);let[ej,ez]=(0,n.useState)(!1);(0,n.useEffect)(()=>()=>{window.speechSynthesis.cancel()},[j]);let eS=(e,t)=>{e.stopPropagation(),r(e=>e.map(e=>e.id===t?{...e,liked:!e.liked}:e))},eN=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),eC=e=>({Easy:"A1",Medium:"B1",Hard:"C1"})[e]||e;return(0,t.jsxs)("div",{className:"h-screen bg-zinc-50 dark:bg-zinc-900 flex flex-col overflow-hidden",children:[(0,t.jsxs)("header",{className:"h-16 flex-none border-b border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 px-6 flex items-center justify-between z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.default,{href:"/",className:"text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,t.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),(0,t.jsx)("h1",{className:"text-xl font-bold font-cute text-zinc-800 dark:text-zinc-100",children:"Learn English"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>ei(!0),className:"relative p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400 transition-colors",title:"Vocabulary",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),(0,t.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Q.size>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse px-1",children:Q.size})]}),(0,t.jsx)(h.ThemeToggle,{})]})]}),(0,t.jsxs)("div",{className:"flex-1 w-full p-4 grid grid-cols-1 lg:grid-cols-12 gap-4 overflow-hidden",children:[(0,t.jsxs)("aside",{className:"lg:col-span-3 xl:col-span-3 flex flex-col h-full min-h-0",children:[(0,t.jsxs)("div",{className:"flex p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl mb-4 flex-none",children:[(0,t.jsx)("button",{onClick:()=>F("list"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${"list"===L?"bg-white dark:bg-zinc-900 text-teal-600 shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:"Stories"}),(0,t.jsx)("button",{onClick:()=>F("generator"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${"generator"===L?"bg-white dark:bg-zinc-900 text-teal-600 shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:"Generator"})]}),"list"===L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 mb-4 flex-none border-b border-zinc-100 dark:border-zinc-800 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"font-bold text-zinc-700 dark:text-zinc-300 text-lg",children:"Stories"}),(0,t.jsx)("span",{className:"text-xs bg-zinc-200 dark:bg-zinc-800 px-2 py-1 rounded-full text-zinc-600 dark:text-zinc-400",children:eu.length})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>X(!q),className:`p-1.5 rounded-full transition-colors ${q?"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,title:"Show AI Generated Only",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:q?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})})}),(0,t.jsxs)("div",{className:"relative z-20",children:[(0,t.jsxs)("button",{onClick:()=>K(!Z),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold transition-all ${"All"!==H?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[(0,t.jsx)("span",{className:"text-sm",children:(0,a.getGenreIcon)("All"===H?void 0:H)}),"All"===H?"Genre":H,(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transform transition-transform ${Z?"rotate-180":""}`,children:(0,t.jsx)("path",{d:"m6 9 6 6 6-6"})})]}),Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>K(!1)}),(0,t.jsx)("div",{className:"absolute top-full left-0 mt-2 w-40 bg-white dark:bg-zinc-800 rounded-xl shadow-xl border border-zinc-100 dark:border-zinc-700 p-2 grid grid-cols-1 gap-1 z-20 max-h-60 overflow-y-auto custom-scrollbar",children:["All","Adventure","Fantasy","Sci-Fi","Mystery","Horror","Romance","History","Comedy","Drama","Crime","Biography"].map(e=>(0,t.jsxs)("button",{onClick:()=>{V(e),K(!1)},className:`text-left px-3 py-2 rounded-lg text-xs font-bold transition-colors flex items-center gap-2 ${H===e?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700/50"}`,children:[(0,t.jsx)("span",{className:"text-sm w-5 text-center",children:(0,a.getGenreIcon)("All"===e?void 0:e)}),e]},e))})]})]}),(0,t.jsx)("button",{onClick:()=>M(!C),className:`p-1.5 rounded-full transition-colors ${C?"bg-red-100 text-red-500 dark:bg-red-900/30 dark:text-red-400":"bg-zinc-100 text-zinc-400 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-500 dark:hover:bg-zinc-700"}`,title:"Show Favorites Only",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:C?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>A(!_),className:`p-1.5 rounded-full transition-colors ${S?"bg-teal-100 text-teal-600 dark:bg-teal-900/50 dark:text-teal-400":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,title:"Filter by Date",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,t.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,t.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,t.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),_&&(0,t.jsxs)("div",{className:"absolute right-0 top-10 z-30 bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-xl border border-zinc-100 dark:border-zinc-700 min-w-[250px]",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-zinc-700 dark:text-zinc-300 mb-2",children:"Select Date"}),(0,t.jsx)("input",{type:"date",value:S,onChange:e=>{N(e.target.value),A(!1)},className:"w-full px-3 py-2 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100 mb-3"}),S&&(0,t.jsx)("button",{onClick:()=>{N(""),A(!1)},className:"w-full py-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg text-sm font-medium transition-colors",children:"Clear Filter"})]})]})]})]}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-gradient-right",children:["All","A1","A2","B1","B2","C1","C2"].map(e=>(0,t.jsx)("button",{onClick:()=>G(e),className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap transition-all ${U===e?"bg-teal-500 text-white shadow-md shadow-teal-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:e},e))})]}),(0,t.jsx)("div",{className:"space-y-3 flex-1 overflow-y-auto px-2 pb-2 -mx-2 custom-scrollbar",children:p?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-20 bg-zinc-100 dark:bg-zinc-800/50 rounded-xl animate-pulse"},e))}):0===eu.length?(0,t.jsxs)("div",{className:"text-center py-8 text-zinc-400 dark:text-zinc-500 italic bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-800",children:["No stories found",(0,t.jsx)("br",{}),(S||C||"All"!==U||"All"!==H)&&(0,t.jsx)("button",{onClick:()=>{N(""),M(!1),G("All"),V("All"),X(!1)},className:"mt-2 text-teal-600 dark:text-teal-400 text-sm font-bold hover:underline",children:"Clear Filters"})]}):eu.map(e=>{let r;return(0,t.jsxs)("button",{onClick:()=>{var t;let r;return z(t=e.id),void((r=new URLSearchParams(ec.toString())).set("id",t.toString()),r.delete("date"),window.history.pushState(null,"",`?${r.toString()}`))},className:`w-full text-left p-4 rounded-xl border transition-all duration-200 group relative my-1 ${j===e.id?"bg-white dark:bg-zinc-800 border-teal-500 ring-1 ring-teal-500 shadow-md transform scale-[1.02] z-10":"bg-white dark:bg-zinc-900/50 border-zinc-200 dark:border-zinc-800 hover:border-teal-300 dark:hover:border-teal-700 hover:shadow-sm"}`,children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-2 pr-8",children:(0,t.jsx)("h3",{className:`font-bold font-cute ${j===e.id?"text-teal-600 dark:text-teal-400":"text-zinc-800 dark:text-zinc-200"}`,children:e.title})}),(0,t.jsx)("div",{className:"absolute top-4 right-4 z-10 p-1",onClick:t=>eS(t,e.id),children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:e.liked?"#EF4444":"none",stroke:e.liked?"#EF4444":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-all ${e.liked?"scale-110":"text-zinc-300 hover:text-zinc-400"}`,children:(0,t.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs opacity-80 mt-2",children:[(0,t.jsxs)("span",{className:"text-zinc-500 dark:text-zinc-400 flex items-center gap-1",children:[(0,t.jsx)("div",{className:"flex -space-x-1",children:(e.genre||"General").split(",").map((e,r)=>(0,t.jsx)("span",{className:"text-base relative z-0 hover:z-10 transition-all hover:scale-125",title:e.trim(),children:(0,a.getGenreIcon)(e.trim())},r))}),(0,t.jsx)("span",{className:"ml-1",children:eN(e.createdDate)})]}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-md font-bold text-[10px] ${["A1","A2","Easy"].includes(r=eC(e.difficultyLevel))?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":["B1","B2","Medium"].includes(r)?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:eC(e.difficultyLevel)})]})]},e.id)})})]}):(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-1 custom-scrollbar",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-4 border border-zinc-200 dark:border-zinc-700 shadow-sm",children:[(0,t.jsxs)("h3",{className:"font-bold text-zinc-800 dark:text-zinc-200 mb-4 flex items-center gap-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Story Generator"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Topic / Prompt"}),(0,t.jsx)("textarea",{value:R,onChange:e=>E(e.target.value),placeholder:"E.g., A magical cat in space...",className:"w-full px-3 py-2 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900 focus:ring-2 focus:ring-teal-500 outline-none h-24 resize-none text-sm"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Genre"}),(0,t.jsx)("select",{value:T,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900 text-sm",children:["Random","Adventure","Fantasy","Sci-Fi","Mystery","Horror","Romance","History"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Difficulty"}),(0,t.jsx)("select",{value:I,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900 text-sm",children:["Random","A1","A2","B1","B2","C1","C2"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:["Vocabulary Count: ",P]}),(0,t.jsx)("input",{type:"range",min:"5",max:"50",value:P,onChange:e=>W(parseInt(e.target.value)),className:"w-full accent-teal-500"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-zinc-400 mt-1",children:[(0,t.jsx)("span",{children:"5"}),(0,t.jsx)("span",{children:"50"})]})]}),(0,t.jsx)("button",{onClick:async()=>{D(!0);try{let e=Array.from(Y),t=await (0,a.generateStory)(R,I,P,T,e),n=(await (0,a.fetchStories)()).map(e=>({...e,active:!1,liked:!1}));r(n),z(t.id),F("list"),E("")}catch(e){console.error(e),alert("Failed to generate story")}finally{D(!1)}},disabled:$,className:`w-full py-3 rounded-xl font-bold text-white shadow-lg shadow-teal-500/20 transition-all ${$?"bg-zinc-400 cursor-not-allowed":"bg-gradient-to-r from-teal-500 to-emerald-500 hover:scale-[1.02] active:scale-[0.98]"}`,children:$?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Generate Story âœ¨"})]})]})})]}),(0,t.jsx)("main",{className:"lg:col-span-9 xl:col-span-9 bg-white dark:bg-zinc-900 rounded-3xl border border-zinc-200 dark:border-zinc-800 shadow-sm flex flex-col h-full overflow-hidden",children:w?(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-white/80 dark:bg-zinc-900/80 z-20 rounded-3xl",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-500"})}):m?(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-none p-8 pb-4 border-b border-zinc-100 dark:border-zinc-800 bg-white dark:bg-zinc-900 rounded-t-3xl z-10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(m.genre||"General").split(",").map((e,r)=>(0,t.jsxs)("span",{className:"px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900/40 text-teal-700 dark:text-teal-300 text-xs font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,a.getGenreIcon)(e.trim())," ",e.trim()]},r)),(0,t.jsxs)("span",{className:"text-zinc-400 text-sm flex items-center gap-1",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),"Created on ",eN(m.createdDate||new Date().toISOString())]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[m.id>10&&(0,t.jsx)("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400",title:"AI Generated Story",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,t.jsx)("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})})}),(0,t.jsx)("button",{onClick:e=>{j&&eS(e,j)},className:"p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors group",title:"Add to Favorites",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:e.find(e=>e.id===j)?.liked?"#EF4444":"none",stroke:e.find(e=>e.id===j)?.liked?"#EF4444":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-all ${e.find(e=>e.id===j)?.liked?"scale-110":"text-zinc-300 group-hover:text-red-400"}`,children:(0,t.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})})]})]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-zinc-900 dark:text-white font-cute mb-6",children:m.title||"Untitled Story"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>eb(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-100 hover:bg-emerald-200 dark:bg-emerald-900/40 dark:hover:bg-emerald-900/60 text-emerald-700 dark:text-emerald-300 font-bold transition-all duration-200 hover:scale-110 active:scale-90",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),(0,t.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),"Vocabulary"]}),(0,t.jsxs)("button",{onClick:()=>eg(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/40 dark:hover:bg-blue-900/60 text-blue-700 dark:text-blue-300 font-bold transition-all duration-200 hover:scale-110 active:scale-90",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"m5 8 6 6"}),(0,t.jsx)("path",{d:"m4 14 6-6 2-3"}),(0,t.jsx)("path",{d:"M2 5h12"}),(0,t.jsx)("path",{d:"M7 2h1"}),(0,t.jsx)("path",{d:"m22 22-5-10-5 10"}),(0,t.jsx)("path",{d:"M14 18h6"})]}),"Translate"]}),(0,t.jsx)("button",{onClick:()=>{if(m)if(ej)window.speechSynthesis.cancel(),ez(!1);else{let e=new SpeechSynthesisUtterance(m.storyText);e.lang="en-US",e.rate=.9,e.onend=()=>ez(!1),window.speechSynthesis.speak(e),ez(!0)}},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold transition-all duration-200 hover:scale-110 active:scale-90 ${ej?"bg-rose-100 hover:bg-rose-200 dark:bg-rose-900/40 dark:hover:bg-rose-900/60 text-rose-700 dark:text-rose-300":"bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/40 dark:hover:bg-indigo-900/60 text-indigo-700 dark:text-indigo-300"}`,children:ej?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("rect",{x:"9",y:"9",width:"6",height:"6"})]}),"Stop"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),(0,t.jsx)("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),(0,t.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"Listen"]})})]})]}),m.imageUrl&&(0,t.jsxs)("div",{className:"h-64 relative rounded-2xl overflow-hidden mx-8 mb-6 shadow-md border-4 border-white dark:border-zinc-800 shrink-0",children:[(0,t.jsx)("img",{src:m.imageUrl.startsWith("http")?m.imageUrl:`${o.API_BASE_URL}${m.imageUrl}`,alt:m.title,className:"w-full h-full object-cover transform hover:scale-105 transition-transform duration-700"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60"}),(0,t.jsx)("h2",{className:"absolute bottom-4 left-6 text-2xl font-bold text-white font-cute drop-shadow-md z-10",children:m.title})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mx-8 mb-4 p-6 border-2 border-zinc-100 dark:border-zinc-700/50 rounded-2xl bg-zinc-50/50 dark:bg-zinc-800/20 custom-scrollbar",children:(0,t.jsx)("div",{className:"prose dark:prose-invert prose-lg max-w-none leading-loose",children:(0,t.jsx)("p",{className:"font-cute",children:ew.map(e=>(0,t.jsx)(l,{word:e.text,definition:e.definition,isKnown:!!e.definition&&Y.has(e.definition.word),onClick:(e,t)=>{let r;em({word:e,position:{x:(r=t.target.getBoundingClientRect()).left,y:r.bottom}})}},e.id))})})}),(0,t.jsx)("div",{className:"flex-none mt-auto pt-6 px-8 pb-8 border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-zinc-900 rounded-b-3xl z-10",children:(0,t.jsx)(d,{total:m.vocabulary.length,known:ey})}),ex&&(0,t.jsx)(c,{word:ex.word,onClose:()=>em(null),onMarkKnown:ek,position:ex.position}),(0,t.jsx)(g,{show:et,onComplete:()=>er(!1)})]}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-zinc-400",children:(0,t.jsx)("p",{children:"Select a story to start reading"})})}),(0,t.jsx)(u,{isOpen:ef,onClose:()=>eg(!1),chunks:ev,knownWords:Y}),(0,t.jsx)(x,{isOpen:ep,onClose:()=>{eb(!1),ee(new Set)},vocabulary:m?.vocabulary||[],knownWords:Y,newWords:Q,title:"Story Vocabulary"}),(0,t.jsx)(x,{isOpen:en,onClose:()=>{ei(!1),ee(new Set)},vocabulary:es,knownWords:Y,newWords:Q,title:"My Vocabulary"})]})]})}m.exports.create;let b=`
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #e4e4e7;
    border-radius: 3px;
  }
  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #3f3f46;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #d4d4d8;
  }
  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #52525b;
  }
    .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .mask-gradient-right {
    mask-image: linear-gradient(to right, black 80%, transparent 100%);
  }
`;function w(){return(0,t.jsxs)(n.Suspense,{fallback:(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:"Loading..."}),children:[(0,t.jsx)(r.default,{id:b.__hash,children:b}),(0,t.jsx)(p,{})]})}e.s(["default",()=>w],92097)}]);